



## 路由协议

**分为两类：**

- 外部网关协议EGP（External Gateway Protocol）
- 内部网关协议IGP（Interior Gateway Protocol）

> 根据EGP在区域网络之间（或ISP之间）之间**进行路由选择**。     `使用BGP边界网关协议。`
>
> 根据IGP在区域网络内部（或ISP内部）**进行主机识别**。  `使用RIP、RIP2、OSPF等协议。`
>
> 类似：根据IP地址中的网络部分进行路由选择，根据主机部分在链路内部进行主机识别。

> ISP（互联网服务提供商）



### 路由算法

两种：距离向量、链路状态算法。

#### 1.距离向量算法

根据**距离和方向**决定目标网络或目标主机位置的一种方法。



#### 2.链路状态算法

路由器在了解**网络整体连接状态**的基础上生成路由表。每个路由器需要保持同样的信息



### 路由协议

|       路由协议名        | 下一层协议 |   方式   | 适用范围 | 循环检测 |
| :---------------------: | :--------: | :------: | :------: | :------: |
|           RIP           |    UDP     | 距离向量 |   域内   |  不支持  |
|          RIP2           |    UDP     | 距离向量 |   域内   |  不支持  |
|          OSPF           |     IP     | 链路状态 |   域内   |   支持   |
| EGP（指一种特定的协议） |     IP     | 距离向量 | 对外连接 |  不支持  |
|           BGP           |    TCP     | 路径向量 | 对外连接 |   支持   |



#### RIP

基于距离向量的一种路由协议，广泛用于LAN。`距离的单位是跳数，指所经过的路由器的个数`

- 每30s定期向全网广播自己的路由控制信息，若其他路由器没收到信息，则断开连接。`超过6次断开`

- 将已知的路由信息经过下一跳后继续广播   `跳数+1`

> RIP希望尽可能少的通过路由器将数据包转发到目标IP地址。



##### 1.使用子网掩码时的RIP处理

> RIP不交换子网掩码信息，但可用于使用子网掩码的网络环境。

- 根据接口的IP地址分类，得出网络地址。并与路过路由器的包中的IP地址分类得到的网络地址进行比较，若相同，则以出接口的网络地址长度为准

- 若不同，则以IP地址的分类所确定的网络地址长度为准

  ```
  如：路由器出接口地址：192.168.1.33/27  C类地址
  	按照IP地址分类，它的网络地址为192.168.1.33/24。与它相符合的IP地址，其网络地址长度都是27位。
  	否则，则采用每个地址的分类所确定的网络地址长度。
  ```

###### 注意事项

1. 因IP地址分类而产生不同的网络地址时
2. 构造网络地址长度不同的网络环境时

